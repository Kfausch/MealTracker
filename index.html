<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meal Tracker</title>
  <meta name="description" content="A fast, lightweight meal and macro tracker that works on desktop and mobile." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Meal Tracker</h1>
          <div class="sub">Fast macro logging — desktop & mobile friendly.</div>
        </div>
      </div>

      <div class="top-actions">
        <span class="badge" id="mealCountBadge">0 items</span>
        <button class="btn btn-ghost" id="themeToggle" type="button" title="Toggle light/dark">
          Toggle theme
        </button>
      </div>
    </header>

    <main class="grid grid-2">
      <!-- LEFT COLUMN -->
      <section class="grid">
        <div class="card">
          <h2>Add meal</h2>
          <div class="muted">Search, choose a meal, set servings, then add.</div>
          <hr class="sep" />
          <div class="form">
            <div class="form-row cols-2">
              <div>
                <label for="mealSearch">Search meals</label>
                <input id="mealSearch" type="search" placeholder="Type to filter the list…" autocomplete="off" />
              </div>
              <div>
                <label for="mealServings">Servings</label>
                <input id="mealServings" type="number" min="0" step="0.25" value="1" />
              </div>
            </div>

            <div>
              <label for="mealDropdown">Meal</label>
              <select id="mealDropdown" aria-label="Meal list"></select>
            </div>

            <div class="row-inline">
              <button class="btn btn-primary" id="addMealBtn" type="button">Add selected meal</button>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Manual entry</h2>
          <div class="muted">
            One‑offs: use <strong>Add manual meal</strong>. Reusable foods: use <strong>Add &amp; Save</strong>.
            <span class="kbd" style="margin-left:6px;">Enter</span> adds a one‑off.
          </div>
          <hr class="sep" />

          <div class="form" id="manualForm">
            <div class="form-row cols-2">
              <div>
                <label for="manualName">Name</label>
                <input id="manualName" type="text" placeholder="e.g., Steak &amp; Rice" />
              </div>
              <div>
                <label for="manualServings">Servings</label>
                <input id="manualServings" type="number" min="0" step="0.25" value="1" />
              </div>
            </div>

            <div class="form-row cols-2">
              <div>
                <label for="manualCalories">Calories</label>
                <input id="manualCalories" type="number" min="0" step="1" placeholder="0" />
              </div>
              <div>
                <label for="manualProtein">Protein (g)</label>
                <input id="manualProtein" type="number" min="0" step="0.1" placeholder="0" />
              </div>
            </div>

            <div class="form-row cols-2">
              <div>
                <label for="manualCarbs">Carbs (g)</label>
                <input id="manualCarbs" type="number" min="0" step="0.1" placeholder="0" />
              </div>
              <div>
                <label for="manualFat">Fat (g)</label>
                <input id="manualFat" type="number" min="0" step="0.1" placeholder="0" />
              </div>
            </div>

            <div class="row-inline">
              <button class="btn btn-primary" id="addManualBtn" type="button">Add manual meal</button>
              <button class="btn btn-secondary" id="addSaveManualBtn" type="button">Add &amp; Save Manual Meal</button>
              <button class="btn" id="saveManualBtn" type="button">Save only</button>
            </div>
          </div>

          <hr class="sep" />

          <div class="row-inline">
            <button class="btn" id="exportSavedBtn" type="button">Export saved meals</button>
            <button class="btn" id="importSavedBtn" type="button">Import saved meals</button>
            <input id="importFile" type="file" accept=".json,application/json" hidden />
          </div>

          <div style="margin-top:12px;">
            <h2 style="margin-top:0;">Saved manual meals</h2>
            <div class="muted">Tap <strong>Add</strong> to quickly log it, or <strong>Edit</strong> to tweak macros.</div>
            <hr class="sep" />
            <div id="savedMealsList" class="log-list"></div>
            <div id="noSavedMeals" class="muted" style="display:none;">No saved meals yet.</div>
          </div>
        </div>

        <div class="card">
          <h2>Meals selected</h2>
          <div class="muted">Now includes macros for each item. Remove any entry with one tap.</div>
          <hr class="sep" />
          <div id="selectedMeals" class="log-list"></div>
          <div id="emptyLog" class="muted" style="display:none;">Nothing logged yet.</div>

          <hr class="sep" />
          <div class="row-inline">
            <button class="btn btn-danger" id="clearLogBtn" type="button">Clear day</button>
          </div>
        </div>
      </section>

      <!-- RIGHT COLUMN -->
      <section class="grid">
        <div class="card">
          <h2>Daily targets</h2>
          <div class="muted">Auto‑saved in this browser (localStorage).</div>
          <hr class="sep" />

          <div class="form">
            <div class="form-row cols-2">
              <div>
                <label for="targetCalories">Calories</label>
                <input id="targetCalories" type="number" min="0" step="1" value="1800" />
              </div>
              <div>
                <label for="targetProtein">Protein (g)</label>
                <input id="targetProtein" type="number" min="0" step="0.1" value="180" />
              </div>
            </div>

            <div class="form-row cols-2">
              <div>
                <label for="targetCarbs">Carbs (g)</label>
                <input id="targetCarbs" type="number" min="0" step="0.1" value="160" />
              </div>
              <div>
                <label for="targetFat">Fat (g)</label>
                <input id="targetFat" type="number" min="0" step="0.1" value="50" />
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Totals</h2>
          <div class="stats">
            <div class="stat">
              <div class="stat-top">
                <div class="stat-name">Calories</div>
                <div class="stat-val" id="statCalories">0</div>
              </div>
              <div class="progress" id="progCalories"><div class="bar" id="barCalories"></div></div>
              <div class="small" id="remCalories">Remaining: 0</div>
            </div>

            <div class="stat">
              <div class="stat-top">
                <div class="stat-name">Protein</div>
                <div class="stat-val" id="statProtein">0g</div>
              </div>
              <div class="progress" id="progProtein"><div class="bar" id="barProtein"></div></div>
              <div class="small" id="remProtein">Remaining: 0g</div>
            </div>

            <div class="stat">
              <div class="stat-top">
                <div class="stat-name">Carbs</div>
                <div class="stat-val" id="statCarbs">0g</div>
              </div>
              <div class="progress" id="progCarbs"><div class="bar" id="barCarbs"></div></div>
              <div class="small" id="remCarbs">Remaining: 0g</div>
            </div>

            <div class="stat">
              <div class="stat-top">
                <div class="stat-name">Fat</div>
                <div class="stat-val" id="statFat">0g</div>
              </div>
              <div class="progress" id="progFat"><div class="bar" id="barFat"></div></div>
              <div class="small" id="remFat">Remaining: 0g</div>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Data</h2>
          <div class="muted">Optional: export/import your current day log (useful if you switch devices).</div>
          <hr class="sep" />
          <div class="row-inline">
            <button class="btn btn-ghost" id="exportLogBtn" type="button">Export today’s log</button>
            <button class="btn btn-ghost" id="importLogBtn" type="button">Import log</button>
            <input id="importLogFile" type="file" accept=".json,application/json" hidden />
          </div>
        </div>
      </section>
    </main>

    <footer>
      Data stays on-device. If you want cloud sync later, you’ll need a small backend (or a Google Sheets / Firebase layer).
    </footer>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
  <script src="app.js"></script>
</body>
</html>
